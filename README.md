# Тестовое задание на позицию стажера-бекендера

Полное описание задания здесь - <https://github.com/avito-tech/msg-backend-trainee-assignment>

## Переменные окружения

Часть настроек проекта берётся из переменных окружения. Чтобы их определить, создайте файл `.env` рядом с `manage.py` и запишите туда данные в формате `ПЕРЕМЕННАЯ=значение`.

Доступные переменные:

- `SECRET_KEY` — секретный ключ проекта.
- `DEBUG` — режим отладки. Поставьте `true`, чтобы увидеть отладочную информацию в случае ошибки.
- `ALLOWED_HOSTS` — список доменов/хостов, на которых будет работать сайт. Подробнее в [документации Django](https://docs.djangoproject.com/en/4.0/ref/settings/#allowed-hosts)
- `DB_URL` — путь к базе данных. [Здесь](https://github.com/kennethreitz/dj-database-url#url-schema) можно посмотреть форматы путей для различных баз данных.

Пример:

```env
SECRET_KEY=r394nkk!dh&jg!de%ho0e+srarblw$-z3@(k07a1
DEBUG=false
ALLOWED_HOSTS=localhost,127.0.0.1,example.com,www.example.com
DB_URL=sqlite:///db.sqlite3
```

## Запуск

Скачайте код с GitHub. Установите зависимости:

```sh
pip install -r requirements.txt
```

Создайте таблицы в базе данных:

```sh
./manage.py migrate
```

Запустите сервер чата:

```sh
./manage.py runserver 9000
```

Сервер будет доступен по адресу <http://localhost:9000/>

## Доступные API методы

Методы обрабатывают HTTP POST запросы c телом, содержащим все необходимые параметры в JSON.

|URI|Описание|Пример тела запроса|
|---|---|---|
|/users/add|Добавить нового пользователя|{"username": "user_1"}|
|/chats/add|Создать новый чат между пользователями|{"name": "chat_1", "users": [1, 3]}|
|/chats/get|Получить список чатов конкретного пользователя|{"user": 5}|
|/messages/add|Отправить сообщение в чат от лица пользователя|{"chat": 3, "author": 1, "text": "hi"}|
|/messages/get|Получить список сообщений в конкретном чате|{"chat": 17}|

## Цели проекта

Код написан в учебных целях.
